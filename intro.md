这是一个智能体插件。它的灵感来自项目目录下的 idea.md 文件。 

我希望实现一个 AI 智能体插件。它会监控传入的一系列工具，可以是本地工具或者mcp工具或其他工具。

### 场景

以 tavily search 为例，这种搜索工具通常输入参数是具有语义且相对模糊的，同时其返回结果也是语义且相对模糊的。
针对一个特定用户，他可能在多个时间段问到类似的问题，或者某个问题是另一个问题的变体或基础。那么这些问题的搜索结果就可能有很大重叠。

又比如context7，工具通常返回智能体想要查询的某个依赖库的文档和代码实例，以完成用户的编程任务。类似地，用户可能会多次询问类似的编程问题，导致工具调用结果有较大重叠和调用开销。

我希望实现一个插件，当模型调用工具时，插件在请求实际发生前，先检查历史上是否有类似的工具调用记录。如果有，则根据相似度和引用计数，决定是否复用历史结果，或者将历史结果作为上下文提供给模型，从而优化工具调用的效率和效果。

### 现状

在上下文管理研究方向中，文本相似度等智能算法已经被广泛应用于缓存系统中，比如 GPTCache 等项目。但是偏基建系统的方法应用相对较少，比如引用计数、LRU 缓存等。

### 创新

因此我希望这个项目可以在实现现有文本相似度管理上下文数据的基础上，引入引用技术和缓存淘汰机制，设计一套更高效的上下文管理系统，辅助智能体进行工具调用决策。

### 实现方式

我目前还不清楚其实现方式，我看langchain/langgraph中中间件功能似乎可以实现类似功能，但我还不确定具体细节。

存储上下文的方式是向量化数据库、传统关系型数据库还是结合使用，我也还没有想好。我希望存储后端能够支持高效的相似度检索和引用计数管理。

### 预期效果

预期这个插件可以显著减少重复工具调用的次数，提高智能体的响应速度和准确性。同时，通过引用计数和相似度管理，可以更智能地维护上下文数据，提升整体系统的效率，节约系统存储空间。